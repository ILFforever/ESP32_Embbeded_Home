{
  "info": {
    "name": "ESP32 Smart Home API - Production",
    "description": "Complete test suite for ESP32 IoT API at embedded-smarthome.fly.dev",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.1.0"
  },
  "variable": [
    {
      "key": "url_path",
      "value": "https://embedded-smarthome.fly.dev",
      "type": "string"
    },
    {
      "key": "api_version",
      "value": "v1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. registerDevice",
      "item": [
        {
          "name": "Register Main LCD Hub",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"device_id\": \"lcd_main_001\",\n  \"device_type\": \"main_lcd\",\n  \"mac_address\": \"24:6F:28:12:34:56\",\n  \"firmware_version\": \"1.0.0\",\n  \"capabilities\": [\"display\", \"mesh_coordinator\", \"wifi\", \"touchscreen\"],\n  \"location\": \"living_room\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/register",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "register"]
            }
          }
        },
        {
          "name": "Register Room Sensor",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"device_id\": \"rs_001\",\n  \"device_type\": \"room_sensor\",\n  \"mac_address\": \"24:6F:28:AA:BB:01\",\n  \"firmware_version\": \"1.0.0\",\n  \"capabilities\": [\"temperature\", \"humidity\", \"motion\", \"light\"],\n  \"location\": \"bedroom\",\n  \"sensors\": {\n    \"temperature\": \"DHT22\",\n    \"motion\": \"PIR_HC-SR501\",\n    \"light\": \"BH1750\"\n  }\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/register",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "register"]
            }
          }
        },
        {
          "name": "Register Doorbell LCD",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"device_id\": \"df_001\",\n  \"device_type\": \"doorbell_lcd\",\n  \"mac_address\": \"24:6F:28:DD:EE:01\",\n  \"firmware_version\": \"1.1.0\",\n  \"capabilities\": [\"display\", \"button\", \"spi_slave\", \"speaker\"],\n  \"location\": \"front_door\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/register",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "register"]
            }
          }
        },
        {
          "name": "Register Doorbell Camera",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"device_id\": \"dc_001\",\n  \"device_type\": \"doorbell_camera\",\n  \"mac_address\": \"24:6F:28:FF:00:01\",\n  \"firmware_version\": \"2.0.0\",\n  \"capabilities\": [\"camera\", \"face_recognition\", \"spi_master\", \"sd_card\"],\n  \"location\": \"front_door\",\n  \"model\": \"XIAO-ESP32S3-Sense\",\n  \"camera_specs\": {\n    \"resolution\": \"1600x1200\",\n    \"sensor\": \"OV2640\",\n    \"face_detection_model\": \"MTCNN\"\n  }\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/register",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "register"]
            }
          }
        },
        {
          "name": "Register Mesh Hub",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"device_id\": \"mesh_001\",\n  \"device_type\": \"main_mesh\",\n  \"mac_address\": \"24:6F:28:CC:DD:01\",\n  \"firmware_version\": \"1.0.0\",\n  \"capabilities\": [\"mesh_node\", \"wifi\", \"bridge\"],\n  \"location\": \"hallway\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/register",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "register"]
            }
          }
        }
      ]
    },
    {
      "name": "2. handleHeartbeat",
      "item": [
        {
          "name": "Heartbeat - Main LCD (ONLINE)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"uptime\": 3600,\n  \"rssi\": -45,\n  \"free_heap\": 120000,\n  \"status\": \"online\",\n  \"cpu_freq\": 240,\n  \"temperature\": 42.5\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/heartbeat?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "heartbeat"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        },
        {
          "name": "Heartbeat - Doorbell (df_001)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"uptime\": 7200,\n  \"rssi\": -52,\n  \"free_heap\": 85000,\n  \"status\": \"online\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/heartbeat?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "heartbeat"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        },
        {
          "name": "Heartbeat - Room Sensor (LOW MEMORY WARNING)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"uptime\": 14400,\n  \"rssi\": -38,\n  \"free_heap\": 15000,\n  \"status\": \"warning\",\n  \"warnings\": [\"low_memory\"],\n  \"temperature\": 68.2\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/heartbeat?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "heartbeat"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Heartbeat - Weak WiFi Signal",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"uptime\": 10800,\n  \"rssi\": -82,\n  \"free_heap\": 95000,\n  \"status\": \"online\",\n  \"reconnects\": 3,\n  \"signal_quality\": \"poor\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/heartbeat?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "heartbeat"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "3. getDeviceStatus",
      "item": [
        {
          "name": "Get Status - Main LCD",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/status?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        },
        {
          "name": "Get Status - Room Sensor",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/status?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Get Status - Doorbell (df_001)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/status?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        },
        {
          "name": "Get Status - Doorbell Camera",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/status?device_id=dc_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "dc_001"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "4. getAllDevicesStatus",
      "item": [
        {
          "name": "Get All Devices Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/status",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "status"]
            }
          }
        },
        {
          "name": "Get All Devices - Filtered by Type",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/status?type=room_sensor&status=online",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "status"],
              "query": [
                {
                  "key": "type",
                  "value": "room_sensor"
                },
                {
                  "key": "status",
                  "value": "online"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "5. handleSensorData",
      "item": [
        {
          "name": "Send Temperature & Humidity Data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"sensor_type\": \"DHT22\",\n  \"data\": {\n    \"temperature\": 25.5,\n    \"humidity\": 65.2,\n    \"unit\": \"celsius\",\n    \"heat_index\": 26.1\n  },\n  \"location\": \"bedroom\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/sensor-data?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "sensor-data"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Send Motion Detection - MOTION DETECTED",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"sensor_type\": \"PIR\",\n  \"data\": {\n    \"motion\": true,\n    \"duration\": 5000,\n    \"intensity\": \"high\"\n  },\n  \"location\": \"bedroom\",\n  \"alert_level\": \"normal\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/sensor-data?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "sensor-data"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Send Light Level Data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"sensor_type\": \"BH1750\",\n  \"data\": {\n    \"light_level\": 450,\n    \"unit\": \"lux\",\n    \"ambient_light\": \"moderate\"\n  },\n  \"location\": \"bedroom\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/sensor-data?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "sensor-data"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Send Multiple Sensor Readings",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"sensor_type\": \"COMPOSITE\",\n  \"data\": {\n    \"temperature\": 24.8,\n    \"humidity\": 62.5,\n    \"light_level\": 320,\n    \"motion\": false,\n    \"air_quality\": 95,\n    \"pressure\": 1013.25\n  },\n  \"location\": \"bedroom\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/sensor-data?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "sensor-data"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Send Sensor Data - HIGH TEMPERATURE ALERT",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"sensor_type\": \"DHT22\",\n  \"data\": {\n    \"temperature\": 35.2,\n    \"humidity\": 85.5,\n    \"unit\": \"celsius\",\n    \"heat_index\": 45.8\n  },\n  \"location\": \"bedroom\",\n  \"alert_level\": \"high\",\n  \"threshold_exceeded\": true\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/sensor-data?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "sensor-data"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "6. getDeviceHistory",
      "item": [
        {
          "name": "Get Device History - Last 100 Records",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/history?device_id=rs_001&limit=100",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "history"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                },
                {
                  "key": "limit",
                  "value": "100"
                }
              ]
            }
          }
        },
        {
          "name": "Get Device History - Date Range",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/history?device_id=rs_001&start_date=2025-11-18T00:00:00Z&end_date=2025-11-19T23:59:59Z",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "history"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                },
                {
                  "key": "start_date",
                  "value": "2025-11-18T00:00:00Z"
                },
                {
                  "key": "end_date",
                  "value": "2025-11-19T23:59:59Z"
                }
              ]
            }
          }
        },
        {
          "name": "Get Device History - With Sensor Type Filter",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/history?device_id=rs_001&sensor_type=DHT22&limit=50",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "history"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                },
                {
                  "key": "sensor_type",
                  "value": "DHT22"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            }
          }
        },
        {
          "name": "Get Device History - Pagination",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/history?device_id=rs_001&limit=20&offset=40",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "history"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "40"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "7. handleDoorbellRing",
      "item": [
        {
          "name": "Doorbell Ring - Button Press",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"ring_type\": \"button_press\",\n  \"duration\": 2000,\n  \"button_press_count\": 1,\n  \"volume\": 80\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/ring?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "ring"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        },
        {
          "name": "Doorbell Ring - Double Press",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"ring_type\": \"double_press\",\n  \"duration\": 4000,\n  \"button_press_count\": 2,\n  \"time_between_presses\": 500,\n  \"volume\": 100,\n  \"priority\": \"high\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/ring?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "ring"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        },
        {
          "name": "Doorbell Ring - Motion Triggered",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"ring_type\": \"motion_triggered\",\n  \"duration\": 1500,\n  \"motion_detected\": true,\n  \"auto_trigger\": true,\n  \"volume\": 60\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/ring?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "ring"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "8. handleFaceDetection",
      "item": [
        {
          "name": "Face Detection - Known Person",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"face_detected\": true,\n  \"confidence\": 0.96,\n  \"face_id\": \"FACE_001\",\n  \"person_name\": \"John Doe\",\n  \"image_url\": \"https://storage.example.com/faces/2025-11-19/img_001.jpg\",\n  \"bounding_box\": {\n    \"x\": 120,\n    \"y\": 80,\n    \"width\": 200,\n    \"height\": 250\n  },\n  \"metadata\": {\n    \"resolution\": \"1600x1200\",\n    \"lighting\": \"good\",\n    \"angle\": \"frontal\"\n  }\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/face-detection?device_id=dc_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "face-detection"],
              "query": [
                {
                  "key": "device_id",
                  "value": "dc_001"
                }
              ]
            }
          }
        },
        {
          "name": "Face Detection - Unknown Person",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"face_detected\": true,\n  \"confidence\": 0.88,\n  \"face_id\": null,\n  \"person_name\": \"Unknown\",\n  \"image_url\": \"https://storage.example.com/faces/2025-11-19/unknown_002.jpg\",\n  \"bounding_box\": {\n    \"x\": 150,\n    \"y\": 100,\n    \"width\": 180,\n    \"height\": 220\n  },\n  \"alert_level\": \"medium\",\n  \"requires_review\": true\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/face-detection?device_id=dc_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "face-detection"],
              "query": [
                {
                  "key": "device_id",
                  "value": "dc_001"
                }
              ]
            }
          }
        },
        {
          "name": "Face Detection - Multiple Faces",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"face_detected\": true,\n  \"face_count\": 2,\n  \"faces\": [\n    {\n      \"face_id\": \"FACE_001\",\n      \"person_name\": \"John Doe\",\n      \"confidence\": 0.95,\n      \"bounding_box\": {\"x\": 100, \"y\": 80, \"width\": 180, \"height\": 220}\n    },\n    {\n      \"face_id\": \"FACE_002\",\n      \"person_name\": \"Jane Smith\",\n      \"confidence\": 0.92,\n      \"bounding_box\": {\"x\": 320, \"y\": 90, \"width\": 170, \"height\": 210}\n    }\n  ],\n  \"image_url\": \"https://storage.example.com/faces/2025-11-19/multi_003.jpg\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/face-detection?device_id=dc_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "face-detection"],
              "query": [
                {
                  "key": "device_id",
                  "value": "dc_001"
                }
              ]
            }
          }
        },
        {
          "name": "Face Detection - No Face Detected",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"face_detected\": false,\n  \"confidence\": 0,\n  \"face_id\": null,\n  \"person_name\": null,\n  \"image_url\": \"https://storage.example.com/faces/2025-11-19/no_face_005.jpg\",\n  \"reason\": \"no_face_in_frame\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/face-detection?device_id=dc_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "face-detection"],
              "query": [
                {
                  "key": "device_id",
                  "value": "dc_001"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "9. handleHubLog",
      "item": [
        {
          "name": "Hub Log - INFO Level",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"log_level\": \"INFO\",\n  \"message\": \"Mesh network initialized successfully\",\n  \"module\": \"mesh_coordinator\",\n  \"metadata\": {\n    \"connected_nodes\": 5,\n    \"rssi\": -45,\n    \"channel\": 6\n  }\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/hub/log?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "hub", "log"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        },
        {
          "name": "Hub Log - WARNING Level",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"log_level\": \"WARNING\",\n  \"message\": \"Room sensor rs_001 not responding\",\n  \"module\": \"device_monitor\",\n  \"metadata\": {\n    \"last_seen\": \"2025-11-19T07:45:00Z\",\n    \"missed_heartbeats\": 3,\n    \"affected_device\": \"rs_001\"\n  }\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/hub/log?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "hub", "log"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        },
        {
          "name": "Hub Log - ERROR Level",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"log_level\": \"ERROR\",\n  \"message\": \"Failed to connect to WiFi network\",\n  \"module\": \"network\",\n  \"metadata\": {\n    \"ssid\": \"HomeNetwork\",\n    \"error_code\": \"WIFI_CONN_FAIL\",\n    \"retry_count\": 5,\n    \"rssi\": -85\n  }\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/hub/log?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "hub", "log"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        },
        {
          "name": "Hub Log - CRITICAL Level",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timestamp\": \"{{$isoTimestamp}}\",\n  \"log_level\": \"CRITICAL\",\n  \"message\": \"System restart due to watchdog timeout\",\n  \"module\": \"system\",\n  \"metadata\": {\n    \"uptime_before_restart\": 86400,\n    \"reset_reason\": \"WATCHDOG\",\n    \"stack_trace\": \"0x40081234,0x40082456\"\n  }\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/hub/log?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "hub", "log"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "10. handleDoorbellStatus",
      "item": [
        {
          "name": "Update Doorbell Status - Armed",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"armed\",\n  \"camera_enabled\": true,\n  \"motion_detection\": true,\n  \"night_vision\": true,\n  \"recording_enabled\": true,\n  \"alerts_enabled\": true,\n  \"sensitivity\": \"high\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/status?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        },
        {
          "name": "Update Doorbell Status - Disarmed",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"disarmed\",\n  \"camera_enabled\": false,\n  \"motion_detection\": false,\n  \"night_vision\": false,\n  \"recording_enabled\": false,\n  \"alerts_enabled\": false\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/status?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        },
        {
          "name": "Update Doorbell Status - Night Mode",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"night_mode\",\n  \"camera_enabled\": true,\n  \"motion_detection\": true,\n  \"night_vision\": true,\n  \"recording_enabled\": true,\n  \"alerts_enabled\": false,\n  \"sensitivity\": \"low\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/status?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "11. getDoorbellStatus",
      "item": [
        {
          "name": "Get Doorbell Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/status?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        },
        {
          "name": "Get Doorbell Status - With Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/doorbell/status?device_id=df_001&include_stats=true",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "doorbell", "status"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                },
                {
                  "key": "include_stats",
                  "value": "true"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "12. sendDeviceCommand",
      "item": [
        {
          "name": "Send Command - Display Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command\": \"display_message\",\n  \"parameters\": {\n    \"message\": \"Welcome Home!\",\n    \"duration\": 5000,\n    \"brightness\": 80,\n    \"font_size\": \"large\",\n    \"alignment\": \"center\"\n  },\n  \"priority\": \"normal\",\n  \"timeout\": 30000\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/command?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "command"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        },
        {
          "name": "Send Command - Update Sensor Settings",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command\": \"update_settings\",\n  \"parameters\": {\n    \"reading_interval\": 60000,\n    \"temperature_threshold\": 30,\n    \"humidity_threshold\": 80,\n    \"motion_sensitivity\": \"medium\"\n  },\n  \"priority\": \"normal\",\n  \"timeout\": 10000\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/command?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "command"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Send Command - Reboot Device",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command\": \"reboot\",\n  \"parameters\": {\n    \"delay\": 5000,\n    \"reason\": \"scheduled_maintenance\"\n  },\n  \"priority\": \"high\",\n  \"timeout\": 60000\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/command?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "command"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Send Command - OTA Firmware Update",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command\": \"ota_update\",\n  \"parameters\": {\n    \"firmware_url\": \"https://firmware.example.com/esp32_doorbell_v2.1.0.bin\",\n    \"version\": \"2.1.0\",\n    \"checksum\": \"abc123def456\",\n    \"auto_reboot\": true\n  },\n  \"priority\": \"high\",\n  \"timeout\": 300000\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/command?device_id=dc_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "command"],
              "query": [
                {
                  "key": "device_id",
                  "value": "dc_001"
                }
              ]
            }
          }
        },
        {
          "name": "Send Command - Emergency Alert",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command\": \"emergency_alert\",\n  \"parameters\": {\n    \"alert_type\": \"intrusion\",\n    \"message\": \"SECURITY ALERT: Motion detected at front door\",\n    \"sound_alarm\": true,\n    \"flash_display\": true,\n    \"duration\": 30000\n  },\n  \"priority\": \"urgent\",\n  \"timeout\": 5000\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/command?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "command"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "13. fetchPendingCommands",
      "item": [
        {
          "name": "Fetch Pending Commands - Main LCD",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/commands/pending?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "commands", "pending"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        },
        {
          "name": "Fetch Pending Commands - Room Sensor",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/commands/pending?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "commands", "pending"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Fetch Pending Commands - Doorbell (df_001)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/commands/pending?device_id=df_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "commands", "pending"],
              "query": [
                {
                  "key": "device_id",
                  "value": "df_001"
                }
              ]
            }
          }
        },
        {
          "name": "Fetch Pending Commands - High Priority Only",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/commands/pending?device_id=lcd_main_001&priority=high",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "commands", "pending"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                },
                {
                  "key": "priority",
                  "value": "high"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "14. acknowledgeCommand",
      "item": [
        {
          "name": "Acknowledge Command - SUCCESS",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command_id\": \"cmd_{{$timestamp}}\",\n  \"status\": \"completed\",\n  \"execution_time\": 1500,\n  \"result\": {\n    \"success\": true,\n    \"message\": \"Message displayed successfully\",\n    \"display_duration\": 5000\n  },\n  \"timestamp\": \"{{$isoTimestamp}}\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/commands/acknowledge?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "commands", "acknowledge"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        },
        {
          "name": "Acknowledge Command - FAILED",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command_id\": \"cmd_{{$timestamp}}\",\n  \"status\": \"failed\",\n  \"execution_time\": 800,\n  \"result\": {\n    \"success\": false,\n    \"error\": \"Invalid parameter value\",\n    \"error_code\": \"INVALID_PARAM\",\n    \"details\": \"Temperature threshold must be between -40 and 85\"\n  },\n  \"timestamp\": \"{{$isoTimestamp}}\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/commands/acknowledge?device_id=rs_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "commands", "acknowledge"],
              "query": [
                {
                  "key": "device_id",
                  "value": "rs_001"
                }
              ]
            }
          }
        },
        {
          "name": "Acknowledge Command - TIMEOUT",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command_id\": \"cmd_{{$timestamp}}\",\n  \"status\": \"timeout\",\n  \"execution_time\": 30000,\n  \"result\": {\n    \"success\": false,\n    \"error\": \"Firmware download timed out\",\n    \"error_code\": \"TIMEOUT\",\n    \"bytes_downloaded\": 524288,\n    \"total_bytes\": 1048576\n  },\n  \"timestamp\": \"{{$isoTimestamp}}\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/commands/acknowledge?device_id=dc_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "commands", "acknowledge"],
              "query": [
                {
                  "key": "device_id",
                  "value": "dc_001"
                }
              ]
            }
          }
        },
        {
          "name": "Acknowledge Command - PARTIAL SUCCESS",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"command_id\": \"cmd_{{$timestamp}}\",\n  \"status\": \"partial\",\n  \"execution_time\": 2500,\n  \"result\": {\n    \"success\": true,\n    \"message\": \"Settings updated with warnings\",\n    \"warnings\": [\n      \"Brightness capped at 90% due to ambient light sensor\",\n      \"Font size adjusted to fit screen\"\n    ],\n    \"applied_settings\": {\n      \"brightness\": 90,\n      \"font_size\": \"medium\"\n    }\n  },\n  \"timestamp\": \"{{$isoTimestamp}}\"\n}"
            },
            "url": {
              "raw": "{{url_path}}/api/{{api_version}}/devices/commands/acknowledge?device_id=lcd_main_001",
              "host": ["{{url_path}}"],
              "path": ["api", "{{api_version}}", "devices", "commands", "acknowledge"],
              "query": [
                {
                  "key": "device_id",
                  "value": "lcd_main_001"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
